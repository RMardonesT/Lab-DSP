/***************************************************************************//**
* \file     Funciones que deben impementar los alumnos
*
* \brief    Plantilla para crear funci�n en C para una sFunction de Matlab
*
* \authors  Gonzalo Carrasco
*******************************************************************************/

/******************************************************************************
**      HEADER FILES
******************************************************************************/
#include <template.h>
#include <stdint.h>
#include <stdbool.h>

/******************************************************************************
**      MODULE PREPROCESSOR CONSTANTS
******************************************************************************/
#define n (20000)

/******************************************************************************
**      MODULE MACROS
******************************************************************************/


/******************************************************************************
**      MODULE DATATYPES
******************************************************************************/


/******************************************************************************
**      MODULE VARIABLE DEFINITIONS
******************************************************************************/


/******************************************************************************
**      PRIVATE FUNCTION DECLARATIONS (PROTOTYPES)
******************************************************************************/


/******************************************************************************
**      FUNCTION DEFINITIONS
******************************************************************************/

/***************************************************************************//**
*   \brief Implementaci�n de linea de retardo mediante buffer lineal
*
*   \param  input : Arreglo de datos de la se�al
*	\param  n     : Muestras del Retardo
*
*   \return Void.
*******************************************************************************/
int16_t retardo_lineal_int(int16_t input) {

	static int16_t buffer[n]; //{actual, 1 retardo, 2 retardos...}

	static bool flag = true;
	if (flag) {
		for (int i = 0; i < n; i++) {
			buffer[i] = 0;
		}
		flag = false;
	}

	int16_t output = buffer[n - 1];

	for (int idx = n - 2; idx >= 1; idx--) {
		buffer[idx + 1] = buffer[idx];
	}
	buffer[0] = input;

	return output;
}

/******************************************************************************
**      END OF SOURCE FILE
******************************************************************************/
